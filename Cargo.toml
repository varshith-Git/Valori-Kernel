[package]
name = "valori-kernel"
version = "0.1.0"
edition = "2021"
license = "AGPL-3.0-only"

[dependencies]
blake3 = { version = "1.5", default-features = false }
serde = { version = "1.0", default-features = false, features = ["derive", "alloc"] }
bincode = { version = "2.0.0-rc.3", default-features = false, features = ["serde", "alloc"] }
crc64fast = "1.0"
thiserror = "1.0"
byteorder = "1.5"
memmap2 = "0.9"
rustc-hash = "2.1.1"

[features]
std = []

[workspace]
members = [
    "node",
    "ffi",
    "verify",
    "embedded",
    "crates/persistence",
    "crates/cli",
    "crates/demo-generator",
]

# Firmware requires abort on panic (no unwinding support in no_std)
# This also guarantees fail-closed behavior for the Node.
[profile.dev]
panic = "abort"

[profile.release]
panic = "abort"

[dev-dependencies]
tempfile = "3"
